import{G as r,R as b,F as e,X as S}from"./vendor-cs3zdoKa.js";import{C}from"./calendar-D2ofcCv5.js";import{I as j}from"./index-nhF-x-lx.js";function k(n,a,x){const s=r.useRef(a),{target:o=document,enabled:c=!0,capture:l=!1,passive:d=!1}={};r.useEffect(()=>{s.current=a},[a]),r.useEffect(()=>{if(!c||!o)return;const u=f=>{s.current(f)};return o.addEventListener(n,u,{capture:l}),()=>{o.removeEventListener(n,u,{capture:l})}},[n,o,c,l,d])}function R({value:n,onChange:a,placeholder:x}){const[s,o]=r.useState(!1),[c,l]=r.useState({top:0,left:0,width:0}),d=r.useRef(null),u=b.useMemo(()=>{if(!n)return null;try{if(n.match(/^\d{4}-\d{2}-\d{2}$/)){const i=new Date(n+"T00:00:00");if(!isNaN(i.getTime()))return i}const t=new Date(n);if(!isNaN(t.getTime()))return t}catch{}return null},[n]);r.useEffect(()=>{if(s&&d.current){const t=d.current.getBoundingClientRect();l({top:t.bottom+4,left:t.left-16,width:t.width})}},[s]),k("keydown",r.useCallback(t=>{t.key==="Escape"&&o(!1)},[s]));const f=t=>{if(t instanceof Date){const i=t.getFullYear(),p=String(t.getMonth()+1).padStart(2,"0"),m=String(t.getDate()).padStart(2,"0"),g=`${i}-${p}-${m}`;a(g),o(!1)}else if(Array.isArray(t)&&t[0]instanceof Date){const i=t[0].getFullYear(),p=String(t[0].getMonth()+1).padStart(2,"0"),m=String(t[0].getDate()).padStart(2,"0"),g=`${i}-${p}-${m}`;a(g),o(!1)}},h=()=>{o(t=>!t)},y=s?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}}),e.jsx("div",{style:{position:"fixed",top:c.top,left:c.left,zIndex:1e3,backgroundColor:"var(--color-backgroundPrimary)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",WebkitOverflowScrolling:"touch"},onClick:t=>t.stopPropagation(),children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{onClick:()=>o(!1),className:"calendar-close-button",children:e.jsx(j,{name:"cross",size:16})}),e.jsx(C,{onChange:f,value:u,className:"custom-calendar"})]})})]}):null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"relative"},children:e.jsx("input",{ref:d,type:"text",placeholder:x||"YYYY-MM-DD",value:n,onClick:h,onFocus:h,readOnly:!0,className:"calendar-input",style:{width:"100%",border:"none",outline:"none",boxShadow:"none",backgroundColor:"transparent",color:"var(--color-textIconsPrimary)",fontSize:"17px",fontWeight:"400",borderRadius:"4px",cursor:"pointer",WebkitAppearance:"none",appearance:"none"}})}),typeof document<"u"&&S.createPortal(y,document.body)]})}export{R as CalendarComponent};
