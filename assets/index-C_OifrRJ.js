import{G as r,R as S,F as e,W as p,X as C}from"./vendor-DdyQGeqy.js";import{C as k}from"./calendar-FdQeTTpX.js";import{I as j}from"./index-D-a1lJcL.js";function E(o,a,h){const s=r.useRef(a),{target:n=document,enabled:c=!0,capture:l=!1,passive:d=!1}={};r.useEffect(()=>{s.current=a},[a]),r.useEffect(()=>{if(!c||!n)return;const u=f=>{s.current(f)};return n.addEventListener(o,u,{capture:l}),()=>{n.removeEventListener(o,u,{capture:l})}},[o,n,c,l,d])}function v({value:o,onChange:a,placeholder:h}){const[s,n]=r.useState(!1),[c,l]=r.useState({top:0,left:0,width:0}),d=r.useRef(null),u=S.useMemo(()=>{if(!o)return null;try{if(o.match(/^\d{4}-\d{2}-\d{2}$/)){const i=new Date(o+"T00:00:00");if(!isNaN(i.getTime()))return i}const t=new Date(o);if(!isNaN(t.getTime()))return t}catch{}return null},[o]);r.useEffect(()=>{if(s&&d.current){const t=d.current.getBoundingClientRect();l({top:t.bottom+4,left:t.left-16,width:t.width})}},[s]),E("keydown",r.useCallback(t=>{t.key==="Escape"&&n(!1)},[s]));const f=t=>{if(t instanceof Date){p.impactOccurred("soft");const i=t.getFullYear(),m=String(t.getMonth()+1).padStart(2,"0"),g=String(t.getDate()).padStart(2,"0"),x=`${i}-${m}-${g}`;a(x),n(!1)}else if(Array.isArray(t)&&t[0]instanceof Date){p.impactOccurred("soft");const i=t[0].getFullYear(),m=String(t[0].getMonth()+1).padStart(2,"0"),g=String(t[0].getDate()).padStart(2,"0"),x=`${i}-${m}-${g}`;a(x),n(!1)}},y=()=>{p.impactOccurred("soft"),n(t=>!t)},b=s?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:t=>{p.impactOccurred("soft"),t.stopPropagation(),n(!1)}}),e.jsx("div",{style:{position:"fixed",top:c.top,left:c.left,zIndex:1e3,backgroundColor:"var(--color-backgroundPrimary)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",WebkitOverflowScrolling:"touch"},onClick:t=>t.stopPropagation(),children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{onClick:()=>n(!1),className:"calendar-close-button",children:e.jsx(j,{name:"cross",size:16})}),e.jsx(k,{onChange:f,value:u,className:"custom-calendar"})]})})]}):null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"relative"},children:e.jsx("input",{ref:d,type:"text",placeholder:h||"YYYY-MM-DD",value:o,onClick:y,onFocus:y,readOnly:!0,className:"calendar-input",style:{width:"100%",border:"none",outline:"none",boxShadow:"none",backgroundColor:"transparent",color:"var(--color-textIconsPrimary)",fontSize:"17px",fontWeight:"400",borderRadius:"4px",cursor:"pointer",WebkitAppearance:"none",appearance:"none"}})}),typeof document<"u"&&C.createPortal(b,document.body)]})}export{v as CalendarComponent};
